%h2 Fixture index
%a= link_to 'New fixture', '/fixtures/new'
%table
  %thead
    %tr
      %th Request fullpath
      %th Description
      %th Active?
      %th &nbsp;
  %tbody
    - @fixtures.group_by {|f| f.fullpath}.each do |fullpath, fs|
      - fs.each_with_index do |f, i|
        %tr{:id => "fixture_row_#{f.id}"}
          - if i == 0
            %td{:rowspan => fs.size}= fullpath
          %td= f.description
          %td.label.text-center
            %input.active-fixture-toggle{:type => 'radio', :name => fullpath, :checked => f.active, :data => { :fixture_id => f.id }}
          %td.edit-link.text-center.white-space-nowrap
            = link_to 'Edit', "/fixtures/#{f.id}/edit"
            |
            %a.delete_link{:href => "/fixtures/#{f.id}"} Delete

:javascript
  $(function() {
    $('td.label').click(function() {
        $('input', this).click();
    });

    $('input.active-fixture-toggle').click(function(e) {
        e.stopPropagation();

        $.post(
          '/fixtures/' + this.getAttribute('data-fixture_id'),
          { _method: 'put', active: 't' },
          function(data) {
            $.jGrowl(data);
          }
        );
    });
  });
